<div class="diary-post-page">
  <ng-container [ngSwitch]="allPost && allPost.length > 0">
    <div *ngSwitchCase="true">
      <div class="post-box" *ngFor="let post of allPost; let i = index">
        <mat-card>
          <mat-card-header class="card-head">
            <mat-card-title>{{ post.date }} : {{ post.title }}</mat-card-title>
            <div class="card-action-menu">
              <button
                mat-icon-button
                color="primary"
                class="action-btn"
                (click)="onEdit(i)"
              >
                <mat-icon>edit</mat-icon>
              </button>
              <button
                mat-icon-button
                color="warn"
                class="action-btn"
                (click)="onRemove(i)"
              >
                <mat-icon>close</mat-icon>
              </button>
            </div>
          </mat-card-header>
          <mat-card-content>
            {{ post.text }}
          </mat-card-content>
        </mat-card>
      </div>
    </div>
    <div *ngSwitchDefault>
      <div class="no-post">
        <h1>No Post...</h1>
      </div>
    </div>
  </ng-container>
</div>

<ng-template #PostEdit>
  <mat-card class="popup-container">
    <form [formGroup]="editForm" (ngSubmit)="editPost()">
      <mat-card-header>
        <mat-card-title class="edit-title"
          >What are you changing ?</mat-card-title
        >
      </mat-card-header>

      <mat-card-content>
        <mat-form-field
          class="diary-space title"
          subscriptSizing="dynamic"
          hideRequiredMarker="true"
        >
          <mat-label>Topic</mat-label>
          <input matInput formControlName="title" />
        </mat-form-field>

        <mat-form-field
          class="diary-space"
          subscriptSizing="dynamic"
          hideRequiredMarker="true"
        >
          <mat-label>Write your idea</mat-label>
          <textarea
            matInput
            cdkTextareaAutosize
            formControlName="text"
            cdkAutosizeMinRows="7"
            #autosize="cdkTextareaAutosize"
          ></textarea>
        </mat-form-field>
      </mat-card-content>

      <mat-card-actions class="diary-menu">
        <button mat-button type="button" color="warn" matDialogClose>
          <mat-icon>close</mat-icon> CANCEL
        </button>
        <button mat-button type="submit" color="primary">
          <mat-icon>save</mat-icon> UPDATE
        </button>
      </mat-card-actions>
    </form>
  </mat-card>
</ng-template>
